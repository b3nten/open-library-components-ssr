<title>Open Library Lit SSR Prototype</title>
<script type="module">
	// Load random books for trending section
	async function loadTrendingBooks() {
		try {
			const response = await fetch("./data/books.json");
			const books = await response.json();

			// Randomly select 8 books
			const shuffled = [...books].sort(() => Math.random() - 0.5);
			const selectedBooks = shuffled.slice(0, 8);

			// Populate the trending covers
			const trendingContainer = document.querySelector(".trending-covers");
			trendingContainer.innerHTML = selectedBooks
				.map((book) => {
					const buttonLabel =
						book.status.charAt(0).toUpperCase() + book.status.slice(1);
					return `
            <div class="trending-book">
              <img src="${book.coverUrl}" alt="${book.title} cover" class="trending-cover">
              <ol-button variant="secondary" size="small" full-width>${buttonLabel}</ol-button>
            </div>
          `;
				})
				.join("");
		} catch (error) {
			console.error("Error loading trending books:", error);
		}
	}

	// Load books when DOM is ready
	if (document.readyState === "loading") {
		document.addEventListener("DOMContentLoaded", loadTrendingBooks);
	} else {
		loadTrendingBooks();
	}
</script>
